<svg xmlns="http://www.w3.org/2000/svg" width="800" height="400" viewBox="0 0 800 400">
  <defs>
    <filter id="shadow_rect_1" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="2" stdDeviation="4" flood-color="rgba(0,0,0,0.15)" />
    </filter>
  </defs>
  <rect x="0" y="0" width="800" height="400" fill="#fafafa" />
  <g id="rect_1">
    <rect x="40" y="40" width="280" height="320" rx="12" fill="#e3f2fd" stroke="#1565c0" stroke-width="1.5" filter="url(#shadow_rect_1)" />
    <text x="180" y="62" text-anchor="middle" dominant-baseline="middle" font-family="Inter, system-ui, -apple-system, sans-serif" font-size="14" font-weight="bold" fill="#1565c0">Encoder</text>
    <g id="circle_2">
      <circle cx="180" cy="148" r="28" fill="#bbdefb" stroke="#1565c0" stroke-width="1.5" />
      <text x="180" y="148" text-anchor="middle" dominant-baseline="middle" font-family="Inter, system-ui, -apple-system, sans-serif" font-size="10" font-weight="normal" fill="#1565c0">Self Attn</text>
    </g>
    <g id="rect_3">
      <rect x="103" y="226" width="154" height="65" rx="6" fill="#90caf9" stroke="#1565c0" stroke-width="1.5" />
      <text x="180" y="258.5" text-anchor="middle" dominant-baseline="middle" font-family="Inter, system-ui, -apple-system, sans-serif" font-size="12" font-weight="normal" fill="#1565c0">FFN</text>
    </g>
    <g id="text_4">
      <text x="257" y="317" text-anchor="middle" dominant-baseline="middle" font-family="Inter, system-ui, -apple-system, sans-serif" font-size="11" font-weight="normal" fill="#1565c0">x6</text>
    </g>
  </g>
  <g id="rect_5">
    <rect x="440" y="40" width="280" height="320" rx="12" fill="none" stroke="#e65100" stroke-width="1.5" stroke-dasharray="6 3" />
    <text x="580" y="62" text-anchor="middle" dominant-baseline="middle" font-family="Inter, system-ui, -apple-system, sans-serif" font-size="14" font-weight="bold" fill="#e65100">Decoder</text>
    <g id="circle_6">
      <circle cx="580" cy="148" r="28" fill="#fff3e0" stroke="#e65100" stroke-width="1.5" />
      <text x="580" y="148" text-anchor="middle" dominant-baseline="middle" font-family="Inter, system-ui, -apple-system, sans-serif" font-size="10" font-weight="normal" fill="#e65100">Cross Attn</text>
    </g>
    <g id="rect_7">
      <rect x="503" y="226" width="154" height="65" rx="6" fill="#ffe0b2" stroke="#e65100" stroke-width="1.5" />
      <text x="580" y="258.5" text-anchor="middle" dominant-baseline="middle" font-family="Inter, system-ui, -apple-system, sans-serif" font-size="12" font-weight="normal" fill="#e65100">Linear</text>
    </g>
  </g>
  <g id="rect_8">
    <rect x="736" y="168" width="50" height="36" rx="18" fill="#c8e6c9" stroke="#2e7d32" stroke-width="1.5" />
    <text x="761" y="186" text-anchor="middle" dominant-baseline="middle" font-family="Inter, system-ui, -apple-system, sans-serif" font-size="12" font-weight="bold" fill="#2e7d32">Output</text>
  </g>
  <g class="flowing-arrow">
    <line x1="320" y1="200" x2="434.4" y2="200" stroke="#555" stroke-width="1.5" />
    <polygon points="440,200 433.25,204.29 433.25,195.71" fill="#555" />
    <text x="380" y="192" text-anchor="middle" font-family="Inter, system-ui, -apple-system, sans-serif" font-size="11" fill="#555">hidden states</text>
  </g>
  <g class="flowing-arrow">
    <line x1="720" y1="200" x2="731.79" y2="189.69" stroke="#2e7d32" stroke-width="1.5" />
    <polygon points="736,186 733.74,193.67 728.09,187.22" fill="#2e7d32" />
  </g>
  <g class="flowing-arrow">
    <line x1="320" y1="280" x2="434.4" y2="280" stroke="#999" stroke-width="1.5" stroke-dasharray="6 3" />
    <polygon points="440,280 433.25,284.29 433.25,275.71" fill="#999" />
    <text x="380" y="272" text-anchor="middle" font-family="Inter, system-ui, -apple-system, sans-serif" font-size="11" fill="#999">residual</text>
  </g>
</svg>